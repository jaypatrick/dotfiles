# Environment variables configuration

# Editor settings
export EDITOR=vim
export VISUAL=vim
export PAGER=less

# Less configuration
export LESS='-R -F -X'
export LESSHISTFILE=-

# History settings
export HISTCONTROL=ignoreboth:erasedups
export HISTIGNORE="ls:ll:cd:pwd:bg:fg:history:clear"
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "

# Language and locale
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# XDG Base Directory Specification
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_STATE_HOME="$HOME/.local/state"

# Development tools
export CLICOLOR=1

# Make Python use UTF-8 encoding for output to stdin, stdout, and stderr
export PYTHONIOENCODING='UTF-8'

# Prefer US English and use UTF-8
export LC_CTYPE="en_US.UTF-8"

# Don't clear the screen after quitting a manual page
export MANPAGER='less -X'

# Avoid issues with `gpg` as installed via Homebrew
# https://stackoverflow.com/a/42265848/96656
export GPG_TTY=$(tty)

# Load platform-specific environment variables
if [[ -f "$HOME/.dotfiles/lib/platform.sh" ]]; then
    source "$HOME/.dotfiles/lib/platform.sh"

    # macOS-specific settings
    if is_macos; then
        export HOMEBREW_NO_ANALYTICS=1
        export HOMEBREW_NO_AUTO_UPDATE=1
    fi
fi

# Load local environment variables (not tracked in git)
if [[ -f "$HOME/.env.local" ]]; then
    source "$HOME/.env.local"
fi
